---
import { getCollection } from 'astro:content';
import Layout from '../layouts/Layout.astro';
import { HeroSection } from '../components/HeroSection';
import { SoundsFamiliar } from '../components/SoundsFamiliar';
import { WhatYouMaster } from '../components/WhatYouMaster';
import { WhoThisIsFor } from '../components/WhoThisIsFor';
import { TwoDayAgenda } from '../components/TwoDayAgenda';
import { Instructor } from '../components/Instructor';
import { Skills } from '../components/Skills';
import { Pricing } from '../components/Pricing';
import { WhatsIncluded } from '../components/WhatsIncluded';
import { FAQ } from '../components/FAQ';
import { Footer } from '../components/Footer';

const courses = await getCollection('courses');
const defaultCourse = courses.find((course) => course.data.slug === 'paid-ads-masterclass') || courses[0];

if (!defaultCourse) {
  throw new Error('No courses found. Add a course JSON file in src/content/courses/.');
}

const { data } = defaultCourse;
---

<Layout
  title={data.seo?.metaTitle || data.title}
  description={data.seo?.metaDescription || data.subtitle}
>
  <div class="min-h-screen bg-white">
    <HeroSection hero={data.hero} eventDates={data.eventDates} client:load />
    <SoundsFamiliar />
    <WhatYouMaster />
    <WhoThisIsFor />
    <TwoDayAgenda />
    <Instructor />
    <Skills />
    <Pricing client:load />
    <WhatsIncluded />
    <FAQ client:load />
    <Footer />
  </div>
</Layout>
